<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Modern Machine Learning in R • sl3</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">sl3</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/custom_lrnrs.html">Defining New Learners</a>
    </li>
    <li>
      <a href="../articles/intro_sl3.html">Modern Machine Learning in R</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jeremyrcoyle/sl3">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><script src="intro_sl3_files/htmlwidgets-0.9/htmlwidgets.js"></script><link href="intro_sl3_files/vis-4.20.0/vis.css" rel="stylesheet">
<script src="intro_sl3_files/vis-4.20.0/vis.min.js"></script><script src="intro_sl3_files/visNetwork-binding-2.0.1/visNetwork.js"></script><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Modern Machine Learning in R</h1>
                        <h4 class="author">Jeremy Coyle &amp; Nima Hejazi</h4>
            
            <h4 class="date">2017-10-29</h4>
          </div>

    
    
<div class="contents">
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>The <code>sl3</code> package provides a modern framework for machine learning. This includes the Super Learner algorithm <span class="citation">(van der Laan, Polley, and Hubbard 2007)</span>, a method for performing stacked regressions <span class="citation">(Breiman 1996)</span> and combining this with covariate screening and cross-validation. <code>sl3</code> uses an Object Oriented Programming (OOP) approach and leverages <a href="https://cran.r-project.org/web/packages/R6/vignettes/Introduction.html"><code>R6</code></a> classes to define both <em>Tasks</em> (machine learning problems) and <em>Learners</em> (machine learning algorithms that attempt to solve those problems) in a way that is flexible and extensible. The design of <code>sl3</code> owes a lot to the <code>SuperLearner</code> and <code>mlr</code> packages that also provide a unified framework for machine learning.</p>
<div id="example-data" class="section level3">
<h3 class="hasAnchor">
<a href="#example-data" class="anchor"></a>Example Data</h3>
<p>Throughout this vignette, we use data from the Collaborative Perinatal Project (CPP) to illustrate <code>sl3</code> features and usage. For simplicity, we’ve included an imputed version of this dataset in the <code>sl3</code> package. Below, we load some useful packages, load the <code>cpp_imputed</code> dataset, and define the columns we’re interested in:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set.seed</span>(<span class="dv">49753</span>)

<span class="co"># packages we'll be using</span>
<span class="kw">library</span>(data.table)
<span class="kw">library</span>(sl3)
<span class="kw">library</span>(origami)
<span class="kw">library</span>(SuperLearner)

<span class="co"># load example data set</span>
<span class="kw">data</span>(cpp_imputed)

<span class="co"># here are the covariates we are interested in, and the outcome of course</span>
covars &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"apgar1"</span>, <span class="st">"apgar5"</span>, <span class="st">"parity"</span>, <span class="st">"gagebrth"</span>, <span class="st">"mage"</span>, <span class="st">"meducyrs"</span>,
            <span class="st">"sexn"</span>)
outcome &lt;-<span class="st"> "haz"</span></code></pre></div>
</div>
<div id="object-oriented-programming-basics" class="section level3">
<h3 class="hasAnchor">
<a href="#object-oriented-programming-basics" class="anchor"></a>Object Oriented Programming Basics</h3>
<p>As mentioned above, <code>sl3</code> is designed using OOP principles and the <a href="https://cran.r-project.org/web/packages/R6/vignettes/Introduction.html"><code>R6</code></a> OOP framework. While we’ve tried to make it easy to use <code>sl3</code> without worrying much about OOP, it is helpful to have some intuition about how <code>sl3</code> is structured. In this section, we briefly outline some key concepts from OOP. Readers familiar with OOP basics can skip this section. The key concept of OOP is that of an <em>object</em>, a collection of data and functions that corresponds to some conceptual unit. Objects have two main types of elements, <em>fields</em>, which can be thought of as nouns, are information about an object, and <em>methods</em>, which can be thought of as verbs, are things an object can do. Objects are members of <em>classes</em> that define what those fields and methods are. Classes can <em>inherit</em> elements from other classes (sometimes called <em>base classes</em>), so that classes that are similar, but not exactly the same, can share some parts of their definitions.</p>
<p>Many different implementations of OOP exist which vary in how these concepts are implemented and used. R has several different implementations, including S3, S4, reference classes, and R6. <code>sl3</code> uses the <a href="https://cran.r-project.org/web/packages/R6/vignettes/Introduction.html"><code>R6</code></a> implementation. In R6, methods and fields of a class object are accessed using the <code>$</code> operator. The next section explains how these concepts are used in <code>sl3</code> to model machine learning problems and algorithms.</p>
</div>
</div>
<div id="sl3-objects" class="section level2">
<h2 class="hasAnchor">
<a href="#sl3-objects" class="anchor"></a><code>sl3</code> objects</h2>
<div id="tasks" class="section level3">
<h3 class="hasAnchor">
<a href="#tasks" class="anchor"></a>Tasks</h3>
<p>The <code>sl3_Task</code> class defines machine learning problems. An <code>sl3_Task</code> object keeps track of the task data, as well as what variables play what roles in the machine learning problem. We can see an example of that here, using the cpp dataset described above:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">task &lt;-<span class="st"> </span><span class="kw"><a href="../reference/sl3_Task.html">make_sl3_Task</a></span>(<span class="dt">data =</span> cpp_imputed, <span class="dt">covariates =</span> covars, <span class="dt">outcome =</span> outcome)</code></pre></div>
<p>We use the <code>make_sl3_Task</code> method to create a new <code>sl3_Task</code>, called <code>task</code>. Here, we specified the underlying data, <code>cpp_imputed</code>, and vectors indicating which varaibles to use as covaraites and outcomes.</p>
<p>Let’s take a look at this object:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">task</code></pre></div>
<pre><code>## A sl3 Task with 1441 observations and the following nodes:
## $covariates
## [1] "apgar1"   "apgar5"   "parity"   "gagebrth" "mage"     "meducyrs"
## [7] "sexn"    
## 
## $outcome
## [1] "haz"
## 
## $id
## NULL
## 
## $weights
## NULL
## 
## $offset
## NULL</code></pre>
<p>In addition to the simple usage demonstarted above, <code>make_sl3_Task</code> supports a range of options to indicate additional specifics of the machine learning problem. For example, we can specify the <code>id</code>, <code>weights</code>, and <code>offset</code> nodes listed above. These additional features are documented in the help for <a href="../help/sl3_Task"><code>sl3_Task</code></a>.</p>
</div>
</div>
<div id="learners" class="section level2">
<h2 class="hasAnchor">
<a href="#learners" class="anchor"></a>Learners</h2>
<p><code>Lrnr_base</code> is the base class for defining machine learning algorithms, as well as <em>fits</em> for those algorithms to particular <code>sl3_Task</code>s. Different machine learning algorithms are defined in classes that inherit for <code>Lrnr_base</code>. For instance, the <code>Lrnr_glm</code> class inherits from <code>Lrnr_base</code>, and defines a learner that fits generalized linear models. We will use the term <em>learners</em> to refer to the family of classes that inherit from <code>Lrnr_base</code>. Learner objects can be constructed from their class definitions using the <code>make_learner</code> function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># make learner object</span>
lrnr_glm &lt;-<span class="st"> </span><span class="kw"><a href="../reference/Lrnr_base.html">make_learner</a></span>(Lrnr_glm)</code></pre></div>
<p>Because all learners inherit from <code>Lrnr_base</code>, they have many features in common, and can be used interchangeably. All learners define three main methods: <code>train</code>, <code>predict</code>, and <code>chain</code>. The first, <code>train</code>, takes a <code>sl3_task</code> object, and returns a learner_fit, which has the same class as the learner that was trained:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># fit learner to task data</span>
lrnr_glm_fit &lt;-<span class="st"> </span>lrnr_glm<span class="op">$</span><span class="kw">train</span>(task)

<span class="co"># verify that the learner is fit</span>
lrnr_glm_fit<span class="op">$</span>is_trained</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Here, we fit the learner to the CPP task we defined above. Both <code>lrnr_glm</code> and <code>lrnr_glm_fit</code> are objects of class <code>Lrnr_glm</code>, although the former defines a learner, and the latter defines a fit of that learner. We can distiguish between the learners and learner fits using the <code>is_trained</code> field, which is true for fits but not for learners.</p>
<p>Now that we’ve fit a learner, we can generate predictions using the <code>predict</code> method:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># get learner predictions</span>
preds &lt;-<span class="st"> </span>lrnr_glm_fit<span class="op">$</span><span class="kw">predict</span>(task)
<span class="kw">head</span>(preds)</code></pre></div>
<pre><code>## [1] 0.36298498 0.36298498 0.25993072 0.25993072 0.25993072 0.05680264</code></pre>
<p>Here, we specified <code>task</code> as the task for which we wanted to generate predictions. If we had omitted this, we would have gotten the same predictions, because <code>predict</code> defaults to using the task provided to <code>train</code> (called the training task). Alternatively, we could have provided a different task we wanted to genearte predictions for.</p>
<p>The final important learner method, <code>chain</code> will be discussed below, in the section on <a href="#composition">learner composition</a>. As with <code>sl3_Task</code>, learners have a variety of fields and methods we haven’t discussed here. More information on these can be found in the help for <a href="../help/Lrnr_base"><code>Lrnr_base</code></a>.</p>
<div id="finding-learners" class="section level3">
<h3 class="hasAnchor">
<a href="#finding-learners" class="anchor"></a>Finding Learners</h3>
<p>Learners have <em>properties</em> that indicate what features they support. You can use <code>sl3_list_properties</code> to get a list of all properties supported by at least one learner. You can then use <code>sl3_list_learners</code> to find learners supporting any set of properties. For example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/list_learners.html">sl3_list_properties</a></span>()</code></pre></div>
<pre><code>##  [1] "binomial"             "categorical"          "continuous"          
##  [4] "density"              "ids"                  "multivariate_outcome"
##  [7] "offset"               "preprocessing"        "timeseries"          
## [10] "weights"              "wrapper"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/list_learners.html">sl3_list_learners</a></span>(<span class="kw">c</span>(<span class="st">"binomial"</span>, <span class="st">"offset"</span>))</code></pre></div>
<pre><code>## [1] "Lrnr_glm"      "Lrnr_glm_fast" "Lrnr_h2o_glm"  "Lrnr_h2o_grid"
## [5] "Lrnr_optim"    "Lrnr_solnp"    "Lrnr_xgboost"</code></pre>
<p>The list of supported learners is currently rather limited. Some learners not yet supported natively in <code>sl3</code> can be used via their <code>SuperLearner</code> wrappers. <code>SuperLearner</code> wrappers, screeners, and methods can all be used as <code>sl3</code> learners via <code>Lrnr_pkg_SuperLearner</code>, <code>Lrnr_pkg_SuperLearner_screener</code>, and <code>Lrnr_pkg_SuperLearner_method</code> respectively. Here’s an example of defining a <code>sl3</code> learner that uses the <code>SL.glmnet</code> wrapper from <code>SuperLearner</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lrnr_sl_glmnet &lt;-<span class="st"> </span><span class="kw"><a href="../reference/Lrnr_base.html">make_learner</a></span>(Lrnr_pkg_SuperLearner, <span class="st">"SL.glmnet"</span>)</code></pre></div>
<p>In most cases, using these wrappers will not be as efficient as their native <code>sl3</code> counterparts. If your favorite learner is missing from <code>sl3</code>, please consider adding it by following the <a href="custom_lrnrs.html">Defining New Learners</a> vignette.</p>
</div>
<div id="learner-parameters" class="section level3">
<h3 class="hasAnchor">
<a href="#learner-parameters" class="anchor"></a>Learner Parameters</h3>
<p>In general, learners can be instantiated without providing any additional parameters. We’ve tried to provide sensible defaults for each learner. However, if you would like to modify the learners’ behavior, you can do so by instantiating learners with different parameters.</p>
<p><code>sl3</code> Learners support some common parameters that work with all learners for which they are applicable:</p>
<ul>
<li>
<code>covariates</code>: subsets covariates before fitting. This allows different learners to be fit to the same task with different covariate subsets.</li>
<li>
<code>outcome_type</code>: overrides the <code>task$outcome_type</code>. This allows different learners to be fit to the same task with different outcome_types.</li>
<li>
<code>...</code>: abitrary parameters typically passed directly to the internal learner method. The documentation for each learner will direct to the appropriate function documentation for the learner method.</li>
</ul>
</div>
</div>
<div id="composition" class="section level2">
<h2 class="hasAnchor">
<a href="#composition" class="anchor"></a>Composing Learners</h2>
<p><code>sl3</code> defines two special learners, <code>Pipeline</code> and <code>Stack</code>, that allow learners to be composed in a flexible manner.</p>
<div id="pipelines" class="section level3">
<h3 class="hasAnchor">
<a href="#pipelines" class="anchor"></a>Pipelines</h3>
<p>The idea of a pipeline is a set of learners to be fit <em>sequentially</em>, using the fit from one learner to define the task for the next learner. There are many ways in which a learner can define the task for the downstream learner. The <code>chain</code> method defined by learners defines how this will work. Let’s look at the example of prescreening variables. For now, we’ll rely on a screener from the <code>SuperLearner</code> package, although native <code>sl3</code> screening algorithms will be implemented soon.</p>
<p>Below, we generate a screener object based on the <code>SuperLearner</code> function <code>screen.corP</code>, and fit it to our task. Inspecting the fit, we see that it selected a subset of covariates:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">screen_cor &lt;-<span class="st"> </span>Lrnr_pkg_SuperLearner_screener<span class="op">$</span><span class="kw">new</span>(<span class="st">"screen.corP"</span>)
screen_fit &lt;-<span class="st"> </span>screen_cor<span class="op">$</span><span class="kw">train</span>(task)
<span class="kw">print</span>(screen_fit)</code></pre></div>
<pre><code>## [1] "Lrnr_pkg_SuperLearner_screener_screen.corP"
## $selected
## [1] "parity"   "gagebrth"</code></pre>
<p>Now, we can call <code>chain</code> on this learner fit to define a downstream task:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">screened_task &lt;-<span class="st"> </span>screen_fit<span class="op">$</span><span class="kw">chain</span>()
<span class="kw">print</span>(screened_task)</code></pre></div>
<pre><code>## A sl3 Task with 1441 observations and the following nodes:
## $covariates
## [1] "parity"   "gagebrth"
## 
## $outcome
## [1] "haz"
## 
## $id
## NULL
## 
## $weights
## NULL
## 
## $offset
## NULL</code></pre>
<p>As with <code>predict</code>, we can omit a task from the call to <code>chain</code>, in which case it uses the task that was used for training. We can see that the chained task reduces the covariates to the subset selected by the screener. We can fit this new task using the <code>lrnr_glm</code> we defined above:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">screened_glm_fit &lt;-<span class="st"> </span>lrnr_glm<span class="op">$</span><span class="kw">train</span>(screened_task)
screened_preds &lt;-<span class="st"> </span>screened_glm_fit<span class="op">$</span><span class="kw">predict</span>()
<span class="kw">head</span>(screened_preds)</code></pre></div>
<pre><code>## [1]  0.38084472  0.38084472  0.29887623  0.29887623  0.29887623 -0.00987784</code></pre>
<p>The <code>Pipeline</code> class automates this process. It takes an arbitrary number of learners, and fits them sequentially, training and chaining each one in turn. Because <code>Pipeline</code> is a learner like any other, it shares the same interface. We can define a pipeline using <code>make_learner</code>, and use <code>train</code> and <code>predict</code> as before:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sg_pipeline &lt;-<span class="st"> </span><span class="kw"><a href="../reference/Lrnr_base.html">make_learner</a></span>(Pipeline, screen_cor, lrnr_glm)
sg_pipeline_fit &lt;-<span class="st"> </span>sg_pipeline<span class="op">$</span><span class="kw">train</span>(task)
sg_pipeline_preds &lt;-<span class="st"> </span>sg_pipeline_fit<span class="op">$</span><span class="kw">predict</span>()
<span class="kw">head</span>(sg_pipeline_preds)</code></pre></div>
<pre><code>## [1]  0.38084472  0.38084472  0.29887623  0.29887623  0.29887623 -0.00987784</code></pre>
<p>We see that the pipeline returns the same predictions as manually training glm on the chained task from the screening learner.</p>
</div>
<div id="stacks" class="section level3">
<h3 class="hasAnchor">
<a href="#stacks" class="anchor"></a>Stacks</h3>
<p>Like <code>Pipeline</code>s, <code>Stack</code>s combine multiple learners. <code>Stack</code>s train learners <em>simultaneously</em>, so that their predictions can be either combined or compared. Again, <code>Stack</code> is just a special learner, and so has the same interface as all other learners:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">stack &lt;-<span class="st"> </span><span class="kw"><a href="../reference/Lrnr_base.html">make_learner</a></span>(Stack, lrnr_glm, sg_pipeline)
stack_fit &lt;-<span class="st"> </span>stack<span class="op">$</span><span class="kw">train</span>(task)
stack_preds &lt;-<span class="st"> </span>stack_fit<span class="op">$</span><span class="kw">predict</span>()
<span class="kw">head</span>(stack_preds)</code></pre></div>
<pre><code>##      Lrnr_glm Lrnr_pkg_SuperLearner_screener_screen.corP___Lrnr_glm
## 1: 0.36298498                                            0.38084472
## 2: 0.36298498                                            0.38084472
## 3: 0.25993072                                            0.29887623
## 4: 0.25993072                                            0.29887623
## 5: 0.25993072                                            0.29887623
## 6: 0.05680264                                           -0.00987784</code></pre>
<p>Here, we’ve defined and fit a stack comprised of a simple glm learner, and a pipeline that combines a screening algorithm and that same learner. We could have included any abitrary set of learners and pipelines (which are themselves just learners). We can see that the <code>predict</code> method now returns a matrix, with a column for each learner included in the stack.</p>
</div>
<div id="cross-validation" class="section level3">
<h3 class="hasAnchor">
<a href="#cross-validation" class="anchor"></a>Cross-validation</h3>
<p>Having defined a stack, we might want to compare the performance of learners in the stack, which we can do using cross_validation. The <code>Lrnr_cv</code> learner wraps another learner, and does training and prediction in a cross-validated fashion, using separate training and validation splits as defined by <code>task$folds</code>. Here, we define a new <code>Lrnr_cv</code> object based on the previously defined <code>stack</code> and train it and generate validation-set predictions:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cv_stack &lt;-<span class="st"> </span>Lrnr_cv<span class="op">$</span><span class="kw">new</span>(stack)
cv_fit &lt;-<span class="st"> </span>cv_stack<span class="op">$</span><span class="kw">train</span>(task)
cv_preds &lt;-<span class="st"> </span>cv_fit<span class="op">$</span><span class="kw">predict</span>()</code></pre></div>
<p>We can also use the special <code>Lrnr_cv</code> function <code>cv_risk</code> to estimate cross-validated risk values:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">risks &lt;-<span class="st"> </span>cv_fit<span class="op">$</span><span class="kw">cv_risk</span>(loss_squared_error)
<span class="kw">print</span>(risks)</code></pre></div>
<pre><code>##                                              Lrnr_glm 
##                                              1.603389 
## Lrnr_pkg_SuperLearner_screener_screen.corP___Lrnr_glm 
##                                              1.600287</code></pre>
<p>In this example, we don’t see much difference between the two learners, suggesting the addition of the screening step in the pipeline learner didn’t improve performance much.</p>
</div>
<div id="superlearner" class="section level3">
<h3 class="hasAnchor">
<a href="#superlearner" class="anchor"></a>SuperLearner</h3>
<p>We can combine all of the above elements, <code>Pipeline</code>s, <code>Stack</code>s, and cross-validation using <code>Lrnr_cv</code>, to easily define a SuperLearner. SuperLearner fits a “metalearner” that combines predictions from multiple stacked learners. It does this while avoiding overfitting by training the metalearner on validation predictions from cross-validation. Using some of the objects we defined in the above examples, this becomes a very simple operation:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">metalearner &lt;-<span class="st"> </span><span class="kw"><a href="../reference/Lrnr_base.html">make_learner</a></span>(Lrnr_nnls)
cv_task &lt;-<span class="st"> </span>cv_fit<span class="op">$</span><span class="kw">chain</span>()
ml_fit &lt;-<span class="st"> </span>metalearner<span class="op">$</span><span class="kw">train</span>(cv_task)</code></pre></div>
<p>Here, we used a special learner, <code>Lrnr_nnls</code>, for the metalearner. This fits a non-negative least squares metalearner. However, any learner can be used as a metalearner.</p>
<p>The final SuperLearner is defined as a pipeline with the learner stack trained on the full data and the metalearner trained on the validation predictions. Here, we use a special behavior of pipelines: if all objects passed to a pipeline are learner fits (<code>learner$is_trained</code> is <code>TRUE</code>), the result will also be a fit.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sl_pipeline &lt;-<span class="st"> </span><span class="kw"><a href="../reference/Lrnr_base.html">make_learner</a></span>(Pipeline, stack_fit, ml_fit)
sl_preds &lt;-<span class="st"> </span>sl_pipeline<span class="op">$</span><span class="kw">predict</span>()
<span class="kw">head</span>(sl_preds)</code></pre></div>
<pre><code>## [1] 0.34955036 0.34955036 0.26564099 0.26564099 0.26564099 0.01397949</code></pre>
<p>We can more simply fit a SuperLearner using the <code>Lrnr_sl</code> learner. For simplicity, we will use the same set of learners and meta-learning algorithm as we did before:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sl &lt;-<span class="st"> </span>Lrnr_sl<span class="op">$</span><span class="kw">new</span>(<span class="dt">learners =</span> stack,
                  <span class="dt">metalearner =</span> metalearner)
sl_fit &lt;-<span class="st"> </span>sl<span class="op">$</span><span class="kw">train</span>(task)
lrnr_sl_preds &lt;-<span class="st"> </span>sl_fit<span class="op">$</span><span class="kw">predict</span>()
<span class="kw">head</span>(lrnr_sl_preds)</code></pre></div>
<pre><code>## [1] 0.34955036 0.34955036 0.26564099 0.26564099 0.26564099 0.01397949</code></pre>
<p>We can see that this generates the same predictions as the more hands-on definition above.</p>
</div>
</div>
<div id="delayed-computation" class="section level2">
<h2 class="hasAnchor">
<a href="#delayed-computation" class="anchor"></a><code>delayed</code> Computation</h2>
<p>Fitting a SuperLearner, is composed of many different training and prediction steps, for both the learners in the stack, and the metalearner, both on cross-validation folds, and on the full data. For large datasets, this can be extremely time-consuming. We’ve developed a special parallelization framework, <code>delayed</code>, that parallelizes across these tasks, in a way that takes into account their inter-dependent nature. Consider a SuperLearner with three learners:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lrnr_rf &lt;-<span class="st"> </span><span class="kw"><a href="../reference/Lrnr_base.html">make_learner</a></span>(Lrnr_randomForest)
lrnr_glmnet &lt;-<span class="st"> </span><span class="kw"><a href="../reference/Lrnr_base.html">make_learner</a></span>(Lrnr_glmnet)
sl &lt;-<span class="st"> </span>Lrnr_sl<span class="op">$</span><span class="kw">new</span>(<span class="dt">learners =</span> <span class="kw">list</span>(lrnr_glm, lrnr_rf, lrnr_glmnet),
                  <span class="dt">metalearner =</span> metalearner)</code></pre></div>
<p>We can plot the network of tasks requried to train this SuperLearner:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">delayed_sl_fit &lt;-<span class="st"> </span><span class="kw"><a href="../reference/learner_helpers.html">delayed_learner_train</a></span>(sl, task)
<span class="kw">plot</span>(delayed_sl_fit)</code></pre></div>
<div id="htmlwidget-1bafa9868d361e730777" style="width:100%;height:480px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-1bafa9868d361e730777">{"x":{"nodes":{"id":["b7c05bf2-bd0b-11e7-a12a-a45e60d0422b","b7c042de-bd0b-11e7-a12a-a45e60d0422b","b7bf64c2-bd0b-11e7-a12a-a45e60d0422b","b7bf4a14-bd0b-11e7-a12a-a45e60d0422b","b7a43c06-bd0b-11e7-a12a-a45e60d0422b","b7a37d7a-bd0b-11e7-a12a-a45e60d0422b","b7a41be0-bd0b-11e7-a12a-a45e60d0422b","b7a3976a-bd0b-11e7-a12a-a45e60d0422b","b7a3b0e2-bd0b-11e7-a12a-a45e60d0422b","b7a3e7f6-bd0b-11e7-a12a-a45e60d0422b","b7a4fbe6-bd0b-11e7-a12a-a45e60d0422b","b7a4667c-bd0b-11e7-a12a-a45e60d0422b","b7a4df76-bd0b-11e7-a12a-a45e60d0422b","b7a48670-bd0b-11e7-a12a-a45e60d0422b","b7a4a57e-bd0b-11e7-a12a-a45e60d0422b","b7a4c3d8-bd0b-11e7-a12a-a45e60d0422b","b7a5a668-bd0b-11e7-a12a-a45e60d0422b","b7a5178e-bd0b-11e7-a12a-a45e60d0422b","b7a58ade-bd0b-11e7-a12a-a45e60d0422b","b7a53476-bd0b-11e7-a12a-a45e60d0422b","b7a554b0-bd0b-11e7-a12a-a45e60d0422b","b7a5713e-bd0b-11e7-a12a-a45e60d0422b","b7a649b0-bd0b-11e7-a12a-a45e60d0422b","b7a5c030-bd0b-11e7-a12a-a45e60d0422b","b7a62fd4-bd0b-11e7-a12a-a45e60d0422b","b7a5dae8-bd0b-11e7-a12a-a45e60d0422b","b7a5f604-bd0b-11e7-a12a-a45e60d0422b","b7a6158a-bd0b-11e7-a12a-a45e60d0422b","b7a6e0fa-bd0b-11e7-a12a-a45e60d0422b","b7a6622e-bd0b-11e7-a12a-a45e60d0422b","b7a6c782-bd0b-11e7-a12a-a45e60d0422b","b7a67b92-bd0b-11e7-a12a-a45e60d0422b","b7a6958c-bd0b-11e7-a12a-a45e60d0422b","b7a6af22-bd0b-11e7-a12a-a45e60d0422b","b7a7855a-bd0b-11e7-a12a-a45e60d0422b","b7a6f9aa-bd0b-11e7-a12a-a45e60d0422b","b7a760de-bd0b-11e7-a12a-a45e60d0422b","b7a71354-bd0b-11e7-a12a-a45e60d0422b","b7a72d12-bd0b-11e7-a12a-a45e60d0422b","b7a74838-bd0b-11e7-a12a-a45e60d0422b","b7a84ba2-bd0b-11e7-a12a-a45e60d0422b","b7a7af44-bd0b-11e7-a12a-a45e60d0422b","b7a82f14-bd0b-11e7-a12a-a45e60d0422b","b7a7d398-bd0b-11e7-a12a-a45e60d0422b","b7a7f0c6-bd0b-11e7-a12a-a45e60d0422b","b7a812cc-bd0b-11e7-a12a-a45e60d0422b","b7a8fc96-bd0b-11e7-a12a-a45e60d0422b","b7a86b78-bd0b-11e7-a12a-a45e60d0422b","b7a8de46-bd0b-11e7-a12a-a45e60d0422b","b7a888d8-bd0b-11e7-a12a-a45e60d0422b","b7a8a66a-bd0b-11e7-a12a-a45e60d0422b","b7a8c33e-bd0b-11e7-a12a-a45e60d0422b","b7be95c4-bd0b-11e7-a12a-a45e60d0422b","b7a91bfe-bd0b-11e7-a12a-a45e60d0422b","b7a98d64-bd0b-11e7-a12a-a45e60d0422b","b7a9399a-bd0b-11e7-a12a-a45e60d0422b","b7a95830-bd0b-11e7-a12a-a45e60d0422b","b7a973f6-bd0b-11e7-a12a-a45e60d0422b","b7bf3164-bd0b-11e7-a12a-a45e60d0422b","b7beb414-bd0b-11e7-a12a-a45e60d0422b","b7bf179c-bd0b-11e7-a12a-a45e60d0422b","b7becd82-bd0b-11e7-a12a-a45e60d0422b","b7bee68c-bd0b-11e7-a12a-a45e60d0422b","b7beff64-bd0b-11e7-a12a-a45e60d0422b","b7bf7e62-bd0b-11e7-a12a-a45e60d0422b","b7bf96ea-bd0b-11e7-a12a-a45e60d0422b","b7c029de-bd0b-11e7-a12a-a45e60d0422b","b7c01160-bd0b-11e7-a12a-a45e60d0422b","b7bff90a-bd0b-11e7-a12a-a45e60d0422b","b7bfb24c-bd0b-11e7-a12a-a45e60d0422b","b7bfcab6-bd0b-11e7-a12a-a45e60d0422b","b7bfe28a-bd0b-11e7-a12a-a45e60d0422b"],"label":["CV_","bundle","CV_Stack","bundle","Stack","train_task(task = task, fold = fold)","bundle","Lrnr_glm","Lrnr_randomForest_100_TRUE_5_NULL_FALSE","Lrnr_glmnet_NULL_deviance_10_1_100","Stack","train_task(task = task, fold = fold)","bundle","Lrnr_glm","Lrnr_randomForest_100_TRUE_5_NULL_FALSE","Lrnr_glmnet_NULL_deviance_10_1_100","Stack","train_task(task = task, fold = fold)","bundle","Lrnr_glm","Lrnr_randomForest_100_TRUE_5_NULL_FALSE","Lrnr_glmnet_NULL_deviance_10_1_100","Stack","train_task(task = task, fold = fold)","bundle","Lrnr_glm","Lrnr_randomForest_100_TRUE_5_NULL_FALSE","Lrnr_glmnet_NULL_deviance_10_1_100","Stack","train_task(task = task, fold = fold)","bundle","Lrnr_glm","Lrnr_randomForest_100_TRUE_5_NULL_FALSE","Lrnr_glmnet_NULL_deviance_10_1_100","Stack","train_task(task = task, fold = fold)","bundle","Lrnr_glm","Lrnr_randomForest_100_TRUE_5_NULL_FALSE","Lrnr_glmnet_NULL_deviance_10_1_100","Stack","train_task(task = task, fold = fold)","bundle","Lrnr_glm","Lrnr_randomForest_100_TRUE_5_NULL_FALSE","Lrnr_glmnet_NULL_deviance_10_1_100","Stack","train_task(task = task, fold = fold)","bundle","Lrnr_glm","Lrnr_randomForest_100_TRUE_5_NULL_FALSE","Lrnr_glmnet_NULL_deviance_10_1_100","Stack","train_task(task = task, fold = fold)","bundle","Lrnr_glm","Lrnr_randomForest_100_TRUE_5_NULL_FALSE","Lrnr_glmnet_NULL_deviance_10_1_100","Stack","train_task(task = task, fold = fold)","bundle","Lrnr_glm","Lrnr_randomForest_100_TRUE_5_NULL_FALSE","Lrnr_glmnet_NULL_deviance_10_1_100","chain","Lrnr_nnls","make_learner(learner_class = learner_class, ..1, ..2)","Stack","bundle","Lrnr_glm","Lrnr_randomForest_100_TRUE_5_NULL_FALSE","Lrnr_glmnet_NULL_deviance_10_1_100"],"level":[1,2,6,7,8,11,9,10,10,10,8,11,9,10,10,10,8,11,9,10,10,10,8,11,9,10,10,10,8,11,9,10,10,10,8,11,9,10,10,10,8,11,9,10,10,10,8,11,9,10,10,10,8,11,9,10,10,10,8,11,9,10,10,10,5,4,3,4,5,6,6,6],"sequential":[true,true,true,true,true,true,true,false,false,false,true,true,true,false,false,false,true,true,true,false,false,false,true,true,true,false,false,false,true,true,true,false,false,false,true,true,true,false,false,false,true,true,true,false,false,false,true,true,true,false,false,false,true,true,true,false,false,false,true,true,true,false,false,false,true,false,true,true,true,false,false,false],"state":["waiting","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","ready","ready","ready"],"group":["waiting","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","ready","ready","ready"],"shape":["square","square","square","square","square","square","square","dot","dot","dot","square","square","square","dot","dot","dot","square","square","square","dot","dot","dot","square","square","square","dot","dot","dot","square","square","square","dot","dot","dot","square","square","square","dot","dot","dot","square","square","square","dot","dot","dot","square","square","square","dot","dot","dot","square","square","square","dot","dot","dot","square","square","square","dot","dot","dot","square","dot","square","square","square","dot","dot","dot"]},"edges":{"from":["b7a37d7a-bd0b-11e7-a12a-a45e60d0422b","b7a37d7a-bd0b-11e7-a12a-a45e60d0422b","b7a3976a-bd0b-11e7-a12a-a45e60d0422b","b7a37d7a-bd0b-11e7-a12a-a45e60d0422b","b7a3b0e2-bd0b-11e7-a12a-a45e60d0422b","b7a37d7a-bd0b-11e7-a12a-a45e60d0422b","b7a3e7f6-bd0b-11e7-a12a-a45e60d0422b","b7a41be0-bd0b-11e7-a12a-a45e60d0422b","b7a43c06-bd0b-11e7-a12a-a45e60d0422b","b7a4667c-bd0b-11e7-a12a-a45e60d0422b","b7a4667c-bd0b-11e7-a12a-a45e60d0422b","b7a48670-bd0b-11e7-a12a-a45e60d0422b","b7a4667c-bd0b-11e7-a12a-a45e60d0422b","b7a4a57e-bd0b-11e7-a12a-a45e60d0422b","b7a4667c-bd0b-11e7-a12a-a45e60d0422b","b7a4c3d8-bd0b-11e7-a12a-a45e60d0422b","b7a4df76-bd0b-11e7-a12a-a45e60d0422b","b7a4fbe6-bd0b-11e7-a12a-a45e60d0422b","b7a5178e-bd0b-11e7-a12a-a45e60d0422b","b7a5178e-bd0b-11e7-a12a-a45e60d0422b","b7a53476-bd0b-11e7-a12a-a45e60d0422b","b7a5178e-bd0b-11e7-a12a-a45e60d0422b","b7a554b0-bd0b-11e7-a12a-a45e60d0422b","b7a5178e-bd0b-11e7-a12a-a45e60d0422b","b7a5713e-bd0b-11e7-a12a-a45e60d0422b","b7a58ade-bd0b-11e7-a12a-a45e60d0422b","b7a5a668-bd0b-11e7-a12a-a45e60d0422b","b7a5c030-bd0b-11e7-a12a-a45e60d0422b","b7a5c030-bd0b-11e7-a12a-a45e60d0422b","b7a5dae8-bd0b-11e7-a12a-a45e60d0422b","b7a5c030-bd0b-11e7-a12a-a45e60d0422b","b7a5f604-bd0b-11e7-a12a-a45e60d0422b","b7a5c030-bd0b-11e7-a12a-a45e60d0422b","b7a6158a-bd0b-11e7-a12a-a45e60d0422b","b7a62fd4-bd0b-11e7-a12a-a45e60d0422b","b7a649b0-bd0b-11e7-a12a-a45e60d0422b","b7a6622e-bd0b-11e7-a12a-a45e60d0422b","b7a6622e-bd0b-11e7-a12a-a45e60d0422b","b7a67b92-bd0b-11e7-a12a-a45e60d0422b","b7a6622e-bd0b-11e7-a12a-a45e60d0422b","b7a6958c-bd0b-11e7-a12a-a45e60d0422b","b7a6622e-bd0b-11e7-a12a-a45e60d0422b","b7a6af22-bd0b-11e7-a12a-a45e60d0422b","b7a6c782-bd0b-11e7-a12a-a45e60d0422b","b7a6e0fa-bd0b-11e7-a12a-a45e60d0422b","b7a6f9aa-bd0b-11e7-a12a-a45e60d0422b","b7a6f9aa-bd0b-11e7-a12a-a45e60d0422b","b7a71354-bd0b-11e7-a12a-a45e60d0422b","b7a6f9aa-bd0b-11e7-a12a-a45e60d0422b","b7a72d12-bd0b-11e7-a12a-a45e60d0422b","b7a6f9aa-bd0b-11e7-a12a-a45e60d0422b","b7a74838-bd0b-11e7-a12a-a45e60d0422b","b7a760de-bd0b-11e7-a12a-a45e60d0422b","b7a7855a-bd0b-11e7-a12a-a45e60d0422b","b7a7af44-bd0b-11e7-a12a-a45e60d0422b","b7a7af44-bd0b-11e7-a12a-a45e60d0422b","b7a7d398-bd0b-11e7-a12a-a45e60d0422b","b7a7af44-bd0b-11e7-a12a-a45e60d0422b","b7a7f0c6-bd0b-11e7-a12a-a45e60d0422b","b7a7af44-bd0b-11e7-a12a-a45e60d0422b","b7a812cc-bd0b-11e7-a12a-a45e60d0422b","b7a82f14-bd0b-11e7-a12a-a45e60d0422b","b7a84ba2-bd0b-11e7-a12a-a45e60d0422b","b7a86b78-bd0b-11e7-a12a-a45e60d0422b","b7a86b78-bd0b-11e7-a12a-a45e60d0422b","b7a888d8-bd0b-11e7-a12a-a45e60d0422b","b7a86b78-bd0b-11e7-a12a-a45e60d0422b","b7a8a66a-bd0b-11e7-a12a-a45e60d0422b","b7a86b78-bd0b-11e7-a12a-a45e60d0422b","b7a8c33e-bd0b-11e7-a12a-a45e60d0422b","b7a8de46-bd0b-11e7-a12a-a45e60d0422b","b7a8fc96-bd0b-11e7-a12a-a45e60d0422b","b7a91bfe-bd0b-11e7-a12a-a45e60d0422b","b7a91bfe-bd0b-11e7-a12a-a45e60d0422b","b7a9399a-bd0b-11e7-a12a-a45e60d0422b","b7a91bfe-bd0b-11e7-a12a-a45e60d0422b","b7a95830-bd0b-11e7-a12a-a45e60d0422b","b7a91bfe-bd0b-11e7-a12a-a45e60d0422b","b7a973f6-bd0b-11e7-a12a-a45e60d0422b","b7a98d64-bd0b-11e7-a12a-a45e60d0422b","b7be95c4-bd0b-11e7-a12a-a45e60d0422b","b7beb414-bd0b-11e7-a12a-a45e60d0422b","b7beb414-bd0b-11e7-a12a-a45e60d0422b","b7becd82-bd0b-11e7-a12a-a45e60d0422b","b7beb414-bd0b-11e7-a12a-a45e60d0422b","b7bee68c-bd0b-11e7-a12a-a45e60d0422b","b7beb414-bd0b-11e7-a12a-a45e60d0422b","b7beff64-bd0b-11e7-a12a-a45e60d0422b","b7bf179c-bd0b-11e7-a12a-a45e60d0422b","b7bf3164-bd0b-11e7-a12a-a45e60d0422b","b7bf4a14-bd0b-11e7-a12a-a45e60d0422b","b7bf64c2-bd0b-11e7-a12a-a45e60d0422b","b7bf64c2-bd0b-11e7-a12a-a45e60d0422b","b7bf7e62-bd0b-11e7-a12a-a45e60d0422b","b7bf7e62-bd0b-11e7-a12a-a45e60d0422b","b7bf96ea-bd0b-11e7-a12a-a45e60d0422b","b7bfb24c-bd0b-11e7-a12a-a45e60d0422b","b7bfcab6-bd0b-11e7-a12a-a45e60d0422b","b7bfe28a-bd0b-11e7-a12a-a45e60d0422b","b7bff90a-bd0b-11e7-a12a-a45e60d0422b","b7c01160-bd0b-11e7-a12a-a45e60d0422b","b7bf96ea-bd0b-11e7-a12a-a45e60d0422b","b7c029de-bd0b-11e7-a12a-a45e60d0422b","b7c042de-bd0b-11e7-a12a-a45e60d0422b"],"to":["b7a43c06-bd0b-11e7-a12a-a45e60d0422b","b7a3976a-bd0b-11e7-a12a-a45e60d0422b","b7a41be0-bd0b-11e7-a12a-a45e60d0422b","b7a3b0e2-bd0b-11e7-a12a-a45e60d0422b","b7a41be0-bd0b-11e7-a12a-a45e60d0422b","b7a3e7f6-bd0b-11e7-a12a-a45e60d0422b","b7a41be0-bd0b-11e7-a12a-a45e60d0422b","b7a43c06-bd0b-11e7-a12a-a45e60d0422b","b7bf4a14-bd0b-11e7-a12a-a45e60d0422b","b7a4fbe6-bd0b-11e7-a12a-a45e60d0422b","b7a48670-bd0b-11e7-a12a-a45e60d0422b","b7a4df76-bd0b-11e7-a12a-a45e60d0422b","b7a4a57e-bd0b-11e7-a12a-a45e60d0422b","b7a4df76-bd0b-11e7-a12a-a45e60d0422b","b7a4c3d8-bd0b-11e7-a12a-a45e60d0422b","b7a4df76-bd0b-11e7-a12a-a45e60d0422b","b7a4fbe6-bd0b-11e7-a12a-a45e60d0422b","b7bf4a14-bd0b-11e7-a12a-a45e60d0422b","b7a5a668-bd0b-11e7-a12a-a45e60d0422b","b7a53476-bd0b-11e7-a12a-a45e60d0422b","b7a58ade-bd0b-11e7-a12a-a45e60d0422b","b7a554b0-bd0b-11e7-a12a-a45e60d0422b","b7a58ade-bd0b-11e7-a12a-a45e60d0422b","b7a5713e-bd0b-11e7-a12a-a45e60d0422b","b7a58ade-bd0b-11e7-a12a-a45e60d0422b","b7a5a668-bd0b-11e7-a12a-a45e60d0422b","b7bf4a14-bd0b-11e7-a12a-a45e60d0422b","b7a649b0-bd0b-11e7-a12a-a45e60d0422b","b7a5dae8-bd0b-11e7-a12a-a45e60d0422b","b7a62fd4-bd0b-11e7-a12a-a45e60d0422b","b7a5f604-bd0b-11e7-a12a-a45e60d0422b","b7a62fd4-bd0b-11e7-a12a-a45e60d0422b","b7a6158a-bd0b-11e7-a12a-a45e60d0422b","b7a62fd4-bd0b-11e7-a12a-a45e60d0422b","b7a649b0-bd0b-11e7-a12a-a45e60d0422b","b7bf4a14-bd0b-11e7-a12a-a45e60d0422b","b7a6e0fa-bd0b-11e7-a12a-a45e60d0422b","b7a67b92-bd0b-11e7-a12a-a45e60d0422b","b7a6c782-bd0b-11e7-a12a-a45e60d0422b","b7a6958c-bd0b-11e7-a12a-a45e60d0422b","b7a6c782-bd0b-11e7-a12a-a45e60d0422b","b7a6af22-bd0b-11e7-a12a-a45e60d0422b","b7a6c782-bd0b-11e7-a12a-a45e60d0422b","b7a6e0fa-bd0b-11e7-a12a-a45e60d0422b","b7bf4a14-bd0b-11e7-a12a-a45e60d0422b","b7a7855a-bd0b-11e7-a12a-a45e60d0422b","b7a71354-bd0b-11e7-a12a-a45e60d0422b","b7a760de-bd0b-11e7-a12a-a45e60d0422b","b7a72d12-bd0b-11e7-a12a-a45e60d0422b","b7a760de-bd0b-11e7-a12a-a45e60d0422b","b7a74838-bd0b-11e7-a12a-a45e60d0422b","b7a760de-bd0b-11e7-a12a-a45e60d0422b","b7a7855a-bd0b-11e7-a12a-a45e60d0422b","b7bf4a14-bd0b-11e7-a12a-a45e60d0422b","b7a84ba2-bd0b-11e7-a12a-a45e60d0422b","b7a7d398-bd0b-11e7-a12a-a45e60d0422b","b7a82f14-bd0b-11e7-a12a-a45e60d0422b","b7a7f0c6-bd0b-11e7-a12a-a45e60d0422b","b7a82f14-bd0b-11e7-a12a-a45e60d0422b","b7a812cc-bd0b-11e7-a12a-a45e60d0422b","b7a82f14-bd0b-11e7-a12a-a45e60d0422b","b7a84ba2-bd0b-11e7-a12a-a45e60d0422b","b7bf4a14-bd0b-11e7-a12a-a45e60d0422b","b7a8fc96-bd0b-11e7-a12a-a45e60d0422b","b7a888d8-bd0b-11e7-a12a-a45e60d0422b","b7a8de46-bd0b-11e7-a12a-a45e60d0422b","b7a8a66a-bd0b-11e7-a12a-a45e60d0422b","b7a8de46-bd0b-11e7-a12a-a45e60d0422b","b7a8c33e-bd0b-11e7-a12a-a45e60d0422b","b7a8de46-bd0b-11e7-a12a-a45e60d0422b","b7a8fc96-bd0b-11e7-a12a-a45e60d0422b","b7bf4a14-bd0b-11e7-a12a-a45e60d0422b","b7be95c4-bd0b-11e7-a12a-a45e60d0422b","b7a9399a-bd0b-11e7-a12a-a45e60d0422b","b7a98d64-bd0b-11e7-a12a-a45e60d0422b","b7a95830-bd0b-11e7-a12a-a45e60d0422b","b7a98d64-bd0b-11e7-a12a-a45e60d0422b","b7a973f6-bd0b-11e7-a12a-a45e60d0422b","b7a98d64-bd0b-11e7-a12a-a45e60d0422b","b7be95c4-bd0b-11e7-a12a-a45e60d0422b","b7bf4a14-bd0b-11e7-a12a-a45e60d0422b","b7bf3164-bd0b-11e7-a12a-a45e60d0422b","b7becd82-bd0b-11e7-a12a-a45e60d0422b","b7bf179c-bd0b-11e7-a12a-a45e60d0422b","b7bee68c-bd0b-11e7-a12a-a45e60d0422b","b7bf179c-bd0b-11e7-a12a-a45e60d0422b","b7beff64-bd0b-11e7-a12a-a45e60d0422b","b7bf179c-bd0b-11e7-a12a-a45e60d0422b","b7bf3164-bd0b-11e7-a12a-a45e60d0422b","b7bf4a14-bd0b-11e7-a12a-a45e60d0422b","b7bf64c2-bd0b-11e7-a12a-a45e60d0422b","b7c042de-bd0b-11e7-a12a-a45e60d0422b","b7bf7e62-bd0b-11e7-a12a-a45e60d0422b","b7c042de-bd0b-11e7-a12a-a45e60d0422b","b7bf96ea-bd0b-11e7-a12a-a45e60d0422b","b7c042de-bd0b-11e7-a12a-a45e60d0422b","b7bff90a-bd0b-11e7-a12a-a45e60d0422b","b7bff90a-bd0b-11e7-a12a-a45e60d0422b","b7bff90a-bd0b-11e7-a12a-a45e60d0422b","b7c01160-bd0b-11e7-a12a-a45e60d0422b","b7c029de-bd0b-11e7-a12a-a45e60d0422b","b7c029de-bd0b-11e7-a12a-a45e60d0422b","b7c042de-bd0b-11e7-a12a-a45e60d0422b","b7c05bf2-bd0b-11e7-a12a-a45e60d0422b"],"label":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot"},"manipulation":{"enabled":false},"edges":{"arrows":"to"},"layout":{"hierarchical":{"enabled":true,"levelSeparation":500,"direction":"RL"}},"groups":{"waiting":{"color":{"border":"black","background":"white"}},"ready":{"color":{"border":"black","background":"orange"}},"running":{"color":{"border":"black","background":"lightgreen"}},"resolved":{"color":{"border":"black","background":"black"}},"useDefaultGroups":true,"error":{"color":{"border":"black","background":"lightpink"}}}},"groups":["waiting","ready"],"width":"100%","height":null,"idselection":{"enabled":false},"byselection":{"enabled":false},"main":null,"submain":null,"footer":null,"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"nodes":{"label":["waiting","ready","running","resolved","error","sequential","parallel"],"color":[{"border":"black","background":"white"},{"border":"black","background":"orange"},{"border":"black","background":"lightgreen"},{"border":"black","background":"black"},{"border":"black","background":"lightpink"},{"border":"black","background":"white"},{"border":"black","background":"white"}],"shape":["dot","dot","dot","dot","dot","square","dot"]},"nodesToDataframe":true}},"evals":[],"jsHooks":[]}</script><p>Delayed then allows us to parallelize across these tasks using the <a href="https://github.com/HenrikBengtsson/future"><code>future</code></a> package. See the <a href="https://github.com/HenrikBengtsson/future"><code>future</code></a> for information on specifying a <code>future</code> <code>plan</code> to use for parallelization. Performance comparisons can be found in the <a href="SuperLearner_benchmarks.html">SuperLearner Benchmarks</a> vignette. This feature is currently experimental and hasn’t yet been throughly tested on a range of parallel backends.</p>
<hr>
</div>
<div id="session-information" class="section level2">
<h2 class="hasAnchor">
<a href="#session-information" class="anchor"></a>Session Information</h2>
<pre><code>## R version 3.4.2 (2017-09-28)
## Platform: x86_64-apple-darwin15.6.0 (64-bit)
## Running under: macOS Sierra 10.12.5
## 
## Matrix products: default
## BLAS: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRblas.0.dylib
## LAPACK: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRlapack.dylib
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
## [1] SuperLearner_2.0-22 nnls_1.4            origami_0.8.0      
## [4] data.table_1.10.4   sl3_0.2.2          
## 
## loaded via a namespace (and not attached):
##  [1] Rcpp_0.12.13        compiler_3.4.2      iterators_1.0.8    
##  [4] tools_3.4.2         digest_0.6.12       delayed_0.2.1      
##  [7] uuid_0.1-2          jsonlite_1.5        evaluate_0.10.1    
## [10] rstackdeque_1.1.1   checkmate_1.8.4     lattice_0.20-35    
## [13] pkgconfig_2.0.1     rlang_0.1.2.9000    Matrix_1.2-11      
## [16] foreach_1.4.3       igraph_1.1.2        yaml_2.1.14        
## [19] parallel_3.4.2      stringr_1.2.0       knitr_1.17         
## [22] htmlwidgets_0.9     globals_0.10.3      rprojroot_1.2      
## [25] glmnet_2.0-13       grid_3.4.2          listenv_0.6.0      
## [28] R6_2.2.2            rmarkdown_1.6       magrittr_1.5       
## [31] backports_1.1.1     BBmisc_1.11         codetools_0.2-15   
## [34] htmltools_0.3.6     assertthat_0.2.0    abind_1.4-5        
## [37] randomForest_4.6-12 future_1.6.2        stringi_1.1.5      
## [40] visNetwork_2.0.1</code></pre>
<hr>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references">
<div id="ref-breiman1996stacked">
<p>Breiman, Leo. 1996. “Stacked Regressions.” <em>Machine Learning</em> 24 (1). Springer: 49–64.</p>
</div>
<div id="ref-vdl2007super">
<p>van der Laan, Mark J., Eric C. Polley, and Alan E. Hubbard. 2007. “Super Learner.” <em>Statistical Applications in Genetics and Molecular Biology</em> 6 (1).</p>
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#sl3-objects"><code>sl3</code> objects</a></li>
      <li><a href="#learners">Learners</a></li>
      <li><a href="#composition">Composing Learners</a></li>
      <li><a href="#delayed-computation"><code>delayed</code> Computation</a></li>
      <li><a href="#session-information">Session Information</a></li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Jeremy Coyle, Nima Hejazi, Oleg Sofrygin, Ivana Malenica.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
